6.1 Prerequisiti Software e DipendenzePer la corretta esecuzione degli script di inizializzazione, l'ambiente target deve soddisfare i seguenti requisiti minimi:RDBMS: PostgreSQL versione 13 o superiore (compatibilità verificata su v16-alpine).Client Tools: Presenza del client interattivo psql sulla macchina esecutrice.Privilegi Utente: L'utente database utilizzato per il deployment deve possedere i privilegi di SUPERUSER o, in alternativa, il permesso specifico CREATE EXTENSION sul database target, necessario per attivare il modulo uuid-ossp.Connettività: Accesso di rete alla porta TCP/5432 del server database.6.2 Strategia di Versionamento degli ArtefattiGli script SQL sono stati organizzati secondo una logica sequenziale rigorosa, distinguendo tra definizione strutturale (DDL) e manipolazione dati (DML). L'ordine di esecuzione è vincolante per garantire l'integrità referenziale.OrdineArtefatto (File)TipologiaDescrizione Funzionale01Creazione Schema-Tabelle-Costraints NIS2_v2.sqlDDLGenerazione dello schema nis2, tabelle, indici, viste e trigger di audit.02mock_data4.sqlDMLPopolamento delle tabelle con dataset simulato (Scenario: Agenzia Nazionale Mobilità). Richiede l'esecuzione preventiva dello script 01.6.3 Esecuzione del Deployment (CLI)Le operazioni di seguito descritte presuppongono l'utilizzo del terminale di sistema (Bash su Linux/macOS o PowerShell/CMD su Windows).Parametri di configurazione (Esempio):Host: localhostUser: adminDatabase: nis2Fase 1: Inizializzazione dello SchemaIl primo step prevede la creazione delle strutture dati. Si utilizza il flag -f per passare il file sorgente al client psql.Bashpsql -h localhost -p 5432 -U admin -d nis2 -f "Creazione Schema-Tabelle-Costraints NIS2_v2.sql"
Esito atteso: Il sistema restituirà una serie di messaggi di conferma (CREATE SCHEMA, CREATE TABLE, CREATE TRIGGER). L'assenza di messaggi di livello ERROR conferma il successo dell'operazione.Fase 2: Popolamento Dati (Data Ingestion)Successivamente, si procede al caricamento dei dati di test per validare le logiche applicative e i trigger di storico.Bashpsql -h localhost -p 5432 -U admin -d nis2 -f "mock_data4.sql"
Esito atteso: Visualizzazione dei messaggi di INSERT e della notifica procedurale: NOTICE: Generata organizzazione Automotive PA....6.4 Procedura di Estrazione Reportistica (Compliance ACN)Al fine di soddisfare i requisiti di interoperabilità e reporting previsti dalla normativa, il sistema permette l'estrazione diretta del "Profilo ACN" in formato CSV. Tale operazione sfrutta il meta-comando \copy di PostgreSQL per esportare il risultato della vista vw_acn_profile_csv direttamente sul file system locale, senza richiedere strumenti di terze parti.Comando di Estrazione:Bashpsql -h localhost -p 5432 -U admin -d nis2 -c "\copy (SELECT * FROM nis2.vw_acn_profile_csv) TO 'report_acn_nis2.csv' WITH CSV HEADER DELIMITER ';'"
Analisi del comando:-c "...": Esegue una singola istruzione SQL/meta-comando e termina.\copy (...) TO ...: Istruisce il client a leggere i dati dalla vista e scriverli su file locale.WITH CSV HEADER: Genera il file in formato CSV standard includendo l'intestazione delle colonne.DELIMITER ';': Imposta il punto e virgola come separatore, standard de facto per la compatibilità con Excel in ambienti localizzati in italiano.Il file risultante, report_acn_nis2.csv, conterrà l'aggregato completo di organizzazione, servizi critici, asset tecnologici e dipendenze dalla supply chain, pronto per la trasmissione agli organi di controllo.
